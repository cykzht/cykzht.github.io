<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>SeasonStudy Officially Open Source! | 程俞客&amp;称心号</title><meta name="author" content="程小客,zhuhaitian@shushichenxin.com"><meta name="copyright" content="程小客"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Introduces the open-source information, features, implementation principles, usage, and deployment methods of SeasonStudy (TuitionFreeNet). This tool can bypass the restrictions of a certain learning">
<meta property="og:type" content="article">
<meta property="og:title" content="SeasonStudy Officially Open Source!">
<meta property="og:url" content="https://www.g2022cyk.top/2022/04/29/spring_fall_winter_summer_open_source_release/">
<meta property="og:site_name" content="程俞客&amp;称心号">
<meta property="og:description" content="Introduces the open-source information, features, implementation principles, usage, and deployment methods of SeasonStudy (TuitionFreeNet). This tool can bypass the restrictions of a certain learning">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://11.g2022cyk.top:8081/wp-content/uploads/2022/03/1648472807-%E5%B1%95%E7%A4%BA-%E6%89%8B%E6%9C%BA-scaled.jpg">
<meta property="article:published_time" content="2022-04-29T00:59:07.000Z">
<meta property="article:modified_time" content="2025-08-07T07:09:38.609Z">
<meta property="article:author" content="程小客">
<meta property="article:tag" content="TuitionFreeNet">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://11.g2022cyk.top:8081/wp-content/uploads/2022/03/1648472807-%E5%B1%95%E7%A4%BA-%E6%89%8B%E6%9C%BA-scaled.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "SeasonStudy Officially Open Source!",
  "url": "https://www.g2022cyk.top/2022/04/29/spring_fall_winter_summer_open_source_release/",
  "image": "https://11.g2022cyk.top:8081/wp-content/uploads/2022/03/1648472807-展示-手机-scaled.jpg",
  "datePublished": "2022-04-29T00:59:07.000Z",
  "dateModified": "2025-08-07T07:09:38.609Z",
  "author": [
    {
      "@type": "Person",
      "name": "程小客",
      "url": "https://www.g2022cyk.top"
    }
  ]
}</script><link rel="shortcut icon" href="/img/%E7%A7%B0%E5%BF%83%E5%8F%B7.png"><link rel="canonical" href="https://www.g2022cyk.top/2022/04/29/spring_fall_winter_summer_open_source_release/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-8847588120991439',
  enable_page_level_ads: 'true'
});</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?09ca4f4526f7e714a253c7329a59e212";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":false,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: 程小客","link":"链接: ","source":"来源: 程俞客&称心号","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'SeasonStudy Officially Open Source!',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

btf.addGlobalFn('pjaxSend', () => {
  Pace.restart()
}, 'pace_restart')

</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/%E5%B1%9E%E5%AE%9E%E8%AF%9A%E5%BF%83.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">112</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">34</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E4%B8%AD%E6%96%87%E6%9C%9F%E5%88%8A/"><i class="fa-fw fas fa-language"></i><span> 中文</span></a></li><li><a class="site-page child" href="/categories/%E8%8B%B1%E6%96%87%E6%9C%9F%E5%88%8A/"><i class="fa-fw fas fa-globe"></i><span> 英文</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://11.g2022cyk.top:8081/wp-content/uploads/2022/03/1648472807-展示-手机-scaled.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/%E7%A7%B0%E5%BF%83%E5%8F%B7.png" alt="Logo"><span class="site-name">程俞客&amp;称心号</span></a><a class="nav-page-title" href="/"><span class="site-name">SeasonStudy Officially Open Source!</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/%E4%B8%AD%E6%96%87%E6%9C%9F%E5%88%8A/"><i class="fa-fw fas fa-language"></i><span> 中文</span></a></li><li><a class="site-page child" href="/categories/%E8%8B%B1%E6%96%87%E6%9C%9F%E5%88%8A/"><i class="fa-fw fas fa-globe"></i><span> 英文</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">SeasonStudy Officially Open Source!</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-04-29T00:59:07.000Z" title="发表于 2022-04-29 08:59:07">2022-04-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-08-07T07:09:38.609Z" title="更新于 2025-08-07 15:09:38">2025-08-07</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%8B%B1%E6%96%87%E6%9C%9F%E5%88%8A/">英文期刊</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>13分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://11.g2022cyk.top:8081/wp-content/uploads/2022/03/1648472807-%E5%B1%95%E7%A4%BA-%E6%89%8B%E6%9C%BA-scaled.jpg" alt="img"></p>
<p>SeasonStudy has officially been released and is maintained as <a target="_blank" rel="noopener" href="https://github.com/cykzht/season-zhixue">Open Source</a>!</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/cykzht/season-zhixue</span><br></pre></td></tr></table></figure>
<h1>Introduction</h1>
<p>SeasonStudy – TuitionFreeNet, can bypass the restrictions of a certain learning platform to obtain your real scores.</p>
<p>Like its name suggests, it is a program that changes seasons, and each time it starts, it randomly selects a season as the theme season.</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://11.g2022cyk.top:8081/wp-content/uploads/2022/03/1648472921-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20220328204155.png" alt="img"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://11.g2022cyk.top:8081/wp-content/uploads/2022/03/1648472878-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20220328204132.png" alt="img"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://11.g2022cyk.top:8081/wp-content/uploads/2022/03/1648472889-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20220328204139.png" alt="img"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://11.g2022cyk.top:8081/wp-content/uploads/2022/03/1648472866-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20220328204202.png" alt="img"></p>
<h1>Program Principles</h1>
<p>The overall framework of the website is developed using Python + Flask + HTML + layui. The birth of this project is inseparable from the open-source libraries such as <a target="_blank" rel="noopener" href="https://github.com/anwenhu/zhixuewang-python">zhixuewang</a>, <a target="_blank" rel="noopener" href="https://gitee.com/sentsin/layui">layui</a>, <a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2Fpallets%2Fflask">Flask</a>, etc. Thank you to these developers for their contributions to the open-source community.</p>
<h2 id="Web-Services">Web Services</h2>
<p>Using Python’s Flask framework to return page information.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">app = Flask(__name__, static_url_path=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Returns the login page&quot;&quot;&quot;</span></span><br><span class="line">	<span class="keyword">return</span> render_template(<span class="string">&#x27;index.html&#x27;</span>)</span><br><span class="line">app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>, port=<span class="number">5000</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Season-Update">Season Update</h2>
<p>Randomly selects a season and returns the corresponding color and background image.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_season</span>():</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    Randomly selects a season</span></span><br><span class="line"><span class="string">    slog: Season name</span></span><br><span class="line"><span class="string">    pic: Background image</span></span><br><span class="line"><span class="string">    color: Theme color</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    ran = random.randint(<span class="number">1</span>, <span class="number">4</span>)</span><br><span class="line">    <span class="keyword">if</span> (ran == <span class="number">1</span>):</span><br><span class="line">        slog = <span class="string">&#x27;TuitionFreeNet – Autumn&#x27;</span></span><br><span class="line">        color = <span class="string">&#x27;#e5bc00&#x27;</span></span><br><span class="line">        pic = <span class="string">&#x27;images/web_login_bg1.webp&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> (ran == <span class="number">2</span>):</span><br><span class="line">        slog = <span class="string">&#x27;TuitionFreeNet – Summer&#x27;</span></span><br><span class="line">        color = <span class="string">&#x27;#50e45c&#x27;</span></span><br><span class="line">        pic = <span class="string">&#x27;images/web_login_bg2.webp&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> (ran == <span class="number">3</span>):</span><br><span class="line">        slog = <span class="string">&#x27;TuitionFreeNet – Spring&#x27;</span></span><br><span class="line">        color = <span class="string">&#x27;#f1beea&#x27;</span></span><br><span class="line">        pic = <span class="string">&#x27;images/web_login_bg3.webp&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> (ran == <span class="number">4</span>):</span><br><span class="line">        slog = <span class="string">&#x27;TuitionFreeNet – Winter&#x27;</span></span><br><span class="line">        color = <span class="string">&#x27;#27A9E3&#x27;</span></span><br><span class="line">        pic = <span class="string">&#x27;images/web_login_bg4.webp&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> slog, pic, color</span><br></pre></td></tr></table></figure>
<h2 id="User-Login">User Login</h2>
<p>Retrieves the website’s session and user information (from the <a target="_blank" rel="noopener" href="https://github.com/anwenhu/zhixuewang-python">zhixuewang</a> library).</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> zhixuewang.student <span class="keyword">import</span> StudentAccount</span><br><span class="line"><span class="keyword">from</span> zhixuewang.exceptions <span class="keyword">import</span> UserNotFoundError, UserOrPassError, LoginError, RoleError</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_session</span>(<span class="params">username: <span class="built_in">str</span>, password: <span class="built_in">str</span>, _<span class="built_in">type</span>: <span class="built_in">str</span> = <span class="string">&quot;auto&quot;</span></span>) -&gt; requests.Session:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Obtains a session through username and password&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(password) != <span class="number">32</span>:</span><br><span class="line">        password = encode_password(password)</span><br><span class="line">    session = get_basic_session()</span><br><span class="line">    r = session.get(Url.SSO_URL)</span><br><span class="line">    json_obj = json.loads(r.text.strip().replace(<span class="string">&quot;\\&quot;</span>, <span class="string">&quot;&quot;</span>).replace(<span class="string">&quot;&#x27;&quot;</span>, <span class="string">&quot;&quot;</span>)[<span class="number">1</span>:-<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">if</span> json_obj[<span class="string">&quot;code&quot;</span>] != <span class="number">1000</span>:</span><br><span class="line">        <span class="keyword">raise</span> LoginError(json_obj[<span class="string">&quot;data&quot;</span>])</span><br><span class="line">    lt = json_obj[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;lt&quot;</span>]</span><br><span class="line">    execution = json_obj[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;execution&quot;</span>]</span><br><span class="line">    r = session.get(Url.SSO_URL,</span><br><span class="line">                    params=&#123;</span><br><span class="line">                        <span class="string">&quot;encode&quot;</span>: <span class="string">&quot;true&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;sourceappname&quot;</span>: <span class="string">&quot;tkyh,tkyh&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;_eventId&quot;</span>: <span class="string">&quot;submit&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;appid&quot;</span>: <span class="string">&quot;zx-container-client&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;client&quot;</span>: <span class="string">&quot;web&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;type&quot;</span>: <span class="string">&quot;loginByNormal&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;key&quot;</span>: _<span class="built_in">type</span>,</span><br><span class="line">                        <span class="string">&quot;lt&quot;</span>: lt,</span><br><span class="line">                        <span class="string">&quot;execution&quot;</span>: execution,</span><br><span class="line">                        <span class="string">&quot;customLogoutUrl&quot;</span>: <span class="string">&quot;https://www.zhixue.com/login.html&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;username&quot;</span>: username,</span><br><span class="line">                        <span class="string">&quot;password&quot;</span>: password</span><br><span class="line">                    &#125;)</span><br><span class="line">    json_obj = json.loads(r.text.strip().replace(<span class="string">&quot;\\&quot;</span>, <span class="string">&quot;&quot;</span>).replace(<span class="string">&quot;&#x27;&quot;</span>, <span class="string">&quot;&quot;</span>)[<span class="number">1</span>:-<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">if</span> json_obj[<span class="string">&quot;code&quot;</span>] != <span class="number">1001</span>:</span><br><span class="line">        <span class="keyword">if</span> json_obj[<span class="string">&quot;code&quot;</span>] == <span class="number">1002</span>:</span><br><span class="line">            <span class="keyword">raise</span> UserOrPassError()</span><br><span class="line">        <span class="keyword">if</span> json_obj[<span class="string">&quot;code&quot;</span>] == <span class="number">2009</span>:</span><br><span class="line">            <span class="keyword">raise</span> UserNotFoundError()</span><br><span class="line">        <span class="keyword">raise</span> LoginError(json_obj[<span class="string">&quot;data&quot;</span>])</span><br><span class="line">    ticket = json_obj[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;st&quot;</span>]</span><br><span class="line">    session.post(Url.SERVICE_URL, data=&#123;</span><br><span class="line">        <span class="string">&quot;action&quot;</span>: <span class="string">&quot;login&quot;</span>,</span><br><span class="line">        <span class="string">&quot;ticket&quot;</span>: ticket,</span><br><span class="line">    &#125;)</span><br><span class="line">    session.cookies.<span class="built_in">set</span>(<span class="string">&quot;uname&quot;</span>, base64_encode(username))</span><br><span class="line">    session.cookies.<span class="built_in">set</span>(<span class="string">&quot;pwd&quot;</span>, base64_encode(password))</span><br><span class="line">    <span class="keyword">return</span> session</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login_student</span>(<span class="params">username: <span class="built_in">str</span>, password: <span class="built_in">str</span></span>) -&gt; StudentAccount:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Logs in to a student account through username and password&quot;&quot;&quot;</span></span><br><span class="line">    session = get_session(username, password)</span><br><span class="line">    student = StudentAccount(session)</span><br><span class="line">    <span class="keyword">return</span> student.set_base_info()</span><br><span class="line"></span><br><span class="line">zxw = login_student(username, password)</span><br></pre></td></tr></table></figure>
<h2 id="Login-Implementation">Login Implementation</h2>
<p>Uses HTML’s form to submit a POST request and returns to Flask for login.</p>
<h3 id="Frontend">Frontend</h3>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;layui-form&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;&#123;&#123;url_for(&#x27;index&#x27;)&#125;&#125;&quot;</span> <span class="attr">autocomplete</span>=<span class="string">&quot;on&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 45px;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Username&quot;</span> <span class="attr">required</span>=<span class="string">&quot;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-input&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 45px;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Password&quot;</span> <span class="attr">required</span>=<span class="string">&quot;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Remember username<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;remember_user&quot;</span> <span class="attr">id</span>=<span class="string">&quot;remember_user&quot;</span> <span class="attr">lay-skin</span>=<span class="string">&quot;primary&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-size:20px;color:#FF0000&quot;</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layui-form-item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">lay-submit</span> <span class="attr">lay-filter</span>=<span class="string">&quot;login&quot;</span> <span class="attr">class</span>=<span class="string">&quot;layui-btn layui-btn-lg layui-btn-normal&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Login&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">style</span>=<span class="string">&quot;width:100%;font-size: 18px;height: 48px;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">name</span>=<span class="string">&quot;login&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Backend">Backend</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> zhixuewang <span class="keyword">import</span> login_student</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (request.method == <span class="string">&#x27;POST&#x27;</span>):</span><br><span class="line">    username = request.form.get(<span class="string">&quot;username&quot;</span>)</span><br><span class="line">    password = request.form.get(<span class="string">&quot;password&quot;</span>)</span><br><span class="line">    session[<span class="string">&#x27;username&#x27;</span>] = username</span><br><span class="line">    session[<span class="string">&#x27;password&#x27;</span>] = password</span><br><span class="line"></span><br><span class="line">username = session.get(<span class="string">&#x27;username&#x27;</span>)</span><br><span class="line">password = session.get(<span class="string">&#x27;password&#x27;</span>)</span><br><span class="line">exam = request.args.get(<span class="string">&#x27;exam&#x27;</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    zxw = login_student(username, password)</span><br><span class="line">    exams = zxw.get_exams()</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    session.clear()</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;index.html&quot;</span>, season=season, message=e)</span><br></pre></td></tr></table></figure>
<h2 id="Exam-Retrieval">Exam Retrieval</h2>
<p>Calls the API to retrieve all exams.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, <span class="type">Tuple</span>, <span class="type">Union</span></span><br><span class="line"><span class="keyword">from</span> zhixuewang.models <span class="keyword">import</span> (ExtendedList, Exam, Mark, Subject, SubjectScore,</span><br><span class="line">                              StuClass, School, Sex, Grade, Phase, ExtraRank, ExamInfo,</span><br><span class="line">                              StuPerson, StuPersonList)</span><br><span class="line"><span class="keyword">from</span> zhixuewang.exceptions <span class="keyword">import</span> UserDefunctError, PageConnectionError, PageInformationError</span><br><span class="line"><span class="keyword">from</span> json <span class="keyword">import</span> JSONDecodeError</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_page_exam</span>(<span class="params">self, page_index: <span class="built_in">int</span></span>) -&gt; <span class="type">Tuple</span>[ExtendedList[Exam], <span class="built_in">bool</span>]:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Retrieves the exam list for the specified page&quot;&quot;&quot;</span></span><br><span class="line">    <span class="variable language_">self</span>.update_login_status()</span><br><span class="line">    exams: ExtendedList[Exam] = ExtendedList()</span><br><span class="line">    r = <span class="variable language_">self</span>._session.get(Url.GET_EXAM_URL,</span><br><span class="line">                          params=&#123;</span><br><span class="line">                              <span class="string">&quot;pageIndex&quot;</span>: page_index,</span><br><span class="line">                              <span class="string">&quot;pageSize&quot;</span>: <span class="number">10</span></span><br><span class="line">                          &#125;,</span><br><span class="line">                          headers=<span class="variable language_">self</span>._get_auth_header())</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> r.ok:</span><br><span class="line">        <span class="keyword">raise</span> PageConnectionError(</span><br><span class="line">            <span class="string">f&quot;get_page_exam error, status code <span class="subst">&#123;r.status_code&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        json_data = r.json()[<span class="string">&quot;result&quot;</span>]</span><br><span class="line">        <span class="keyword">for</span> exam_data <span class="keyword">in</span> json_data[<span class="string">&quot;examList&quot;</span>]:</span><br><span class="line">            exam = Exam(</span><br><span class="line">                <span class="built_in">id</span>=exam_data[<span class="string">&quot;examId&quot;</span>],</span><br><span class="line">                name=exam_data[<span class="string">&quot;examName&quot;</span>]</span><br><span class="line">            )</span><br><span class="line">            exam.create_time = exam_data[<span class="string">&quot;examCreateDateTime&quot;</span>]</span><br><span class="line">            exams.append(exam)</span><br><span class="line">        hasNextPage: <span class="built_in">bool</span> = json_data[<span class="string">&quot;hasNextPage&quot;</span>]</span><br><span class="line">    <span class="keyword">except</span> (JSONDecodeError, KeyError) <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">raise</span> PageInformationError(</span><br><span class="line">            <span class="string">f&quot;get_page_exam web content changed, error <span class="subst">&#123;e&#125;</span>, content\n<span class="subst">&#123;r.text&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> exams, hasNextPage</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_exams</span>(<span class="params">self</span>) -&gt; ExtendedList[Exam]:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Retrieves all exams&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Cache</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(<span class="variable language_">self</span>.exams) &gt; <span class="number">0</span>:</span><br><span class="line">        latest_exam = <span class="variable language_">self</span>.get_latest_exam()</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.exams[<span class="number">0</span>].<span class="built_in">id</span> == latest_exam.<span class="built_in">id</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.exams</span><br><span class="line"></span><br><span class="line">    exams: ExtendedList[Exam] = ExtendedList()</span><br><span class="line">    i = <span class="number">1</span></span><br><span class="line">    check = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">while</span> check:</span><br><span class="line">        cur_exams, check = <span class="variable language_">self</span>.get_page_exam(i)</span><br><span class="line">        exams.extend(cur_exams)</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">    <span class="variable language_">self</span>.exams = exams</span><br><span class="line">    <span class="keyword">return</span> exams</span><br></pre></td></tr></table></figure>
<h2 id="Score-Retrieval">Score Retrieval</h2>
<p>Calls the API to retrieve the latest or specified exam scores (this version is a modified version).</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, <span class="type">Tuple</span>, <span class="type">Union</span></span><br><span class="line"><span class="keyword">from</span> zhixuewang.models <span class="keyword">import</span> (ExtendedList, Exam, Mark, Subject, SubjectScore,</span><br><span class="line">                              StuClass, School, Sex, Grade, Phase, ExtraRank, ExamInfo,</span><br><span class="line">                              StuPerson, StuPersonList)</span><br><span class="line"><span class="keyword">from</span> zhixuewang.exceptions <span class="keyword">import</span> UserDefunctError, PageConnectionError, PageInformationError</span><br><span class="line"><span class="keyword">from</span> json <span class="keyword">import</span> JSONDecodeError</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__get_self_mark</span>(<span class="params">self, exam: Exam, has_total_score: <span class="built_in">bool</span></span>) -&gt; Mark:</span><br><span class="line">    <span class="variable language_">self</span>.update_login_status()</span><br><span class="line">    mark = Mark(exam=exam, person=<span class="variable language_">self</span>)</span><br><span class="line">    r = <span class="variable language_">self</span>._session.get(Url.GET_MARK_URL,</span><br><span class="line">                          params=&#123;<span class="string">&quot;examId&quot;</span>: exam.<span class="built_in">id</span>&#125;,</span><br><span class="line">                          headers=<span class="variable language_">self</span>._get_auth_header())</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> r.ok:</span><br><span class="line">        <span class="keyword">raise</span> PageConnectionError(</span><br><span class="line">            <span class="string">f&quot;__get_self_mark error, status code <span class="subst">&#123;r.status_code&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        json_data = r.json()</span><br><span class="line">        json_data = json_data[<span class="string">&quot;result&quot;</span>]</span><br><span class="line">        <span class="comment"># exam.name = json_data[&quot;total_score&quot;][&quot;examName&quot;]</span></span><br><span class="line">        <span class="comment"># exam.id = json_data[&quot;total_score&quot;][&quot;examId&quot;]</span></span><br><span class="line">        <span class="keyword">for</span> subject <span class="keyword">in</span> json_data[<span class="string">&quot;paperList&quot;</span>]:</span><br><span class="line">            subject_score = SubjectScore(</span><br><span class="line">                score=subject[<span class="string">&quot;userScore&quot;</span>],</span><br><span class="line">                subject=Subject(</span><br><span class="line">                    <span class="built_in">id</span>=subject[<span class="string">&quot;paperId&quot;</span>],</span><br><span class="line">                    name=subject[<span class="string">&quot;subjectName&quot;</span>],</span><br><span class="line">                    code=subject[<span class="string">&quot;subjectCode&quot;</span>],</span><br><span class="line">                    standard_score=subject[<span class="string">&quot;standardScore&quot;</span>],</span><br><span class="line">                    exam_id=exam.<span class="built_in">id</span>),</span><br><span class="line">                person=StuPerson()</span><br><span class="line">            )</span><br><span class="line">            <span class="comment"># subject_score.create_time = 0</span></span><br><span class="line">            mark.append(subject_score)</span><br><span class="line">        total_score = json_data.get(<span class="string">&quot;totalScore&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> has_total_score <span class="keyword">and</span> total_score:</span><br><span class="line">            subject_score = SubjectScore(</span><br><span class="line">                score=total_score[<span class="string">&quot;userScore&quot;</span>],</span><br><span class="line">                subject=Subject(</span><br><span class="line">                    <span class="built_in">id</span>=<span class="string">&quot;&quot;</span>,</span><br><span class="line">                    name=total_score[<span class="string">&quot;subjectName&quot;</span>],</span><br><span class="line">                    code=<span class="string">&quot;99&quot;</span>,</span><br><span class="line">                    standard_score=total_score[<span class="string">&quot;standardScore&quot;</span>],</span><br><span class="line">                    exam_id=exam.<span class="built_in">id</span>,</span><br><span class="line">                ),</span><br><span class="line">                person=StuPerson(),</span><br><span class="line">                class_rank=exam.class_rank,</span><br><span class="line">                grade_rank=exam.grade_rank</span><br><span class="line">            )</span><br><span class="line">            <span class="comment"># subject_score.create_time = 0</span></span><br><span class="line">            mark.append(subject_score)</span><br><span class="line">        <span class="variable language_">self</span>._set_exam_rank(mark)</span><br><span class="line">    <span class="keyword">except</span> (JSONDecodeError, KeyError) <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">not</span> mark):</span><br><span class="line">            <span class="keyword">raise</span> PageInformationError(<span class="string">&quot;Scores for this exam cannot be queried&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> mark</span><br><span class="line">    <span class="keyword">return</span> mark</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_self_mark</span>(<span class="params">self,</span></span><br><span class="line"><span class="params">                      exam_data: <span class="type">Union</span>[Exam, <span class="built_in">str</span>] = <span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="params">                      has_total_score: <span class="built_in">bool</span> = <span class="literal">True</span></span>) -&gt; Mark:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;Retrieves the scores for the specified exam&quot;&quot;&quot;</span></span><br><span class="line">        exam = <span class="variable language_">self</span>.get_exam(exam_data)</span><br><span class="line">        <span class="keyword">if</span> exam <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> Mark()</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.__get_self_mark(exam, has_total_score)</span><br><span class="line"></span><br><span class="line">exams = zxw.get_exams()</span><br><span class="line">a = zxw.get_self_mark(exams[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>
<h2 id="Table-Presentation">Table Presentation</h2>
<p>Generates a table based on the returned scores.</p>
<h3 id="Frontend-2">Frontend</h3>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">caption</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 23px&quot;</span>&gt;</span></span><br><span class="line">        &#123;&#123;title&#125;&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span> <span class="attr">style</span>=<span class="string">&quot;background: #ee0000&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 20px&quot;</span>&gt;</span>Subject<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 20px&quot;</span>&gt;</span>Score<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      &#123;% for row in data %&#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 20px&quot;</span>&gt;</span>&#123;&#123; row[0] &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 20px&quot;</span>&gt;</span>&#123;&#123; row[1] &#125;&#125;<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      &#123;% endfor %&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Backend-2">Backend</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(exams) != <span class="number">0</span>:</span><br><span class="line">    data = []</span><br><span class="line">    examlist = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> exams:</span><br><span class="line">        data.append(i.<span class="built_in">id</span>)</span><br><span class="line">        examlist.append((i.<span class="built_in">id</span>, i.name))</span><br><span class="line">    <span class="keyword">if</span> (exam):</span><br><span class="line">        <span class="keyword">if</span> (exam <span class="keyword">in</span> data):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                a = zxw.get_self_mark(exam)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="keyword">return</span> render_template(<span class="string">&quot;examlist.html&quot;</span>, data=examlist, season=season, avatar=avatar, message=<span class="string">&quot;No scan for this exam&quot;</span>)</span><br><span class="line">            msg = a.person.name+<span class="string">&#x27;-&#x27;</span>+a.exam.name</span><br><span class="line">            data = []</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> a:</span><br><span class="line">                <span class="keyword">if</span> (i.class_rank):</span><br><span class="line">                    data.append((i.subject.name, i.score, i.class_rank))</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    data.append((i.subject.name, i.score))</span><br><span class="line">            <span class="keyword">return</span> render_template(<span class="string">&quot;zhixue.html&quot;</span>, data=data, season=season, title=msg, avatar=avatar)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> render_template(<span class="string">&quot;examlist.html&quot;</span>, data=examlist, season=season, avatar=avatar, message=<span class="string">&quot;This exam cannot be queried&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> render_template(<span class="string">&quot;examlist.html&quot;</span>, data=examlist, season=season, avatar=avatar)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&quot;index.html&quot;</span>, season=season, message=<span class="string">&#x27;No exams detected&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Automatic-Login">Automatic Login</h2>
<p>Uses the <a target="_blank" rel="noopener" href="https://gitee.com/sentsin/layui">layui</a> framework for secondary development. Stores the account and password in the user’s device via cookies, and automatically fills them in each time you log in (some browsers do not support cookies).</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;js/jquery-3.6.0.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/jquery.cookie.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;js/layui.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    layui.<span class="title function_">use</span>([<span class="string">&#x27;form&#x27;</span>], <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> form = layui.<span class="property">form</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            layer = layui.<span class="property">layer</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">/*Remember username and password*/</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">if</span> ($.<span class="title function_">cookie</span>(<span class="string">&quot;remember_user&quot;</span>)) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            $(<span class="string">&quot;#remember_user&quot;</span>).<span class="title function_">prop</span>(<span class="string">&quot;checked&quot;</span>, <span class="literal">true</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            form.<span class="title function_">val</span>(<span class="string">&quot;add_form&quot;</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="string">&quot;username&quot;</span>: $.<span class="title function_">cookie</span>(<span class="string">&quot;user_name&quot;</span>),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="string">&quot;password&quot;</span>: $.<span class="title function_">cookie</span>(<span class="string">&quot;user_password&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// Perform login operation</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        form.<span class="title function_">on</span>(<span class="string">&#x27;submit(login)&#x27;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            data = data.<span class="property">field</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">if</span> (data.<span class="property">username</span> == <span class="string">&#x27;&#x27;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                layer.<span class="title function_">msg</span>(<span class="string">&#x27;Username cannot be empty&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">if</span> (data.<span class="property">password</span> == <span class="string">&#x27;&#x27;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                layer.<span class="title function_">msg</span>(<span class="string">&#x27;Password cannot be empty&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//Check remember password</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">if</span> (data.<span class="property">remember_user</span> == <span class="string">&quot;on&quot;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">var</span> user_name = data.<span class="property">username</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">var</span> user_password = data.<span class="property">password</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                $.<span class="title function_">cookie</span>(<span class="string">&quot;remember_user&quot;</span>, <span class="string">&quot;true&quot;</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">expires</span>: <span class="number">7</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;); <span class="comment">// Store a cookie with a 7-day expiration</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                $.<span class="title function_">cookie</span>(<span class="string">&quot;user_name&quot;</span>, user_name, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">expires</span>: <span class="number">7</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;); <span class="comment">// Store a cookie with a 7-day expiration</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                $.<span class="title function_">cookie</span>(<span class="string">&quot;user_password&quot;</span>, user_password, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">expires</span>: <span class="number">7</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;); <span class="comment">// Store a cookie with a 7-day expiration</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                $.<span class="title function_">cookie</span>(<span class="string">&quot;remember_user&quot;</span>, <span class="string">&quot;false&quot;</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">expires</span>: -<span class="number">1</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;); <span class="comment">// Delete cookie</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                $.<span class="title function_">cookie</span>(<span class="string">&quot;user_name&quot;</span>, <span class="string">&#x27;&#x27;</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">expires</span>: -<span class="number">1</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                $.<span class="title function_">cookie</span>(<span class="string">&quot;user_password&quot;</span>, <span class="string">&#x27;&#x27;</span>, &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                    <span class="attr">expires</span>: -<span class="number">1</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> <span class="literal">true</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h1>Usage Instructions</h1>
<h2 id="Required-Environment">Required Environment</h2>
<p>Install using pip commands.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip3 install flask</span><br><span class="line">pip3 install zhixuewang</span><br></pre></td></tr></table></figure>
<h2 id="Enable-the-Program">Enable the Program</h2>
<ol>
<li>
<p>After installing the required libraries, run the Python program (ready to use out of the box).</p>
</li>
<li>
<p>Access<a target="_blank" rel="noopener" href="http://127.0.0.1:5000">http://127.0.0.1:5000/</a> to visit the SeasonStudy website.</p>
</li>
<li>
<p>Enter the account and password of a certain learning platform to query the latest exam scores.</p>
</li>
</ol>
<h2 id="Deploy-the-Program">Deploy the Program</h2>
<p>If you want to run the program on a server, it is recommended to start using WSGI.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install gevent</span><br></pre></td></tr></table></figure>
<p>Add the following to the code:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> gevent <span class="keyword">import</span> pywsgi</span><br><span class="line"></span><br><span class="line"><span class="comment">#app.run(host=&#x27;0.0.0.0&#x27;, port=5000)</span></span><br><span class="line">server = pywsgi.WSGIServer((<span class="string">&#x27;0.0.0.0&#x27;</span>, <span class="number">5000</span>), app)</span><br><span class="line">server.serve_forever()</span><br></pre></td></tr></table></figure>
<p>Or use <a target="_blank" rel="noopener" href="https://github.com/benoitc/gunicorn">gunicorn</a> to start.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install gunicorn</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gunicorn app:app</span><br></pre></td></tr></table></figure>
<ul>
<li>app is the flask startup python file, we use <a target="_blank" rel="noopener" href="http://app.py">app.py</a> here,</li>
<li>app is the flask application instance, we named it app in <a target="_blank" rel="noopener" href="http://app.py">app.py</a></li>
</ul>
<h1>Flask Tutorial</h1>
<div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;已经过了&quot;,&quot;messageNext&quot;:&quot;天自上次更新，文章内容可能已过时。&quot;,&quot;postUpdate&quot;:&quot;2025-08-07 15:09:38&quot;}" hidden></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://www.g2022cyk.top">程小客</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://www.g2022cyk.top/2022/04/29/spring_fall_winter_summer_open_source_release/">https://www.g2022cyk.top/2022/04/29/spring_fall_winter_summer_open_source_release/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://www.g2022cyk.top" target="_blank">程俞客&称心号</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/TuitionFreeNet/">TuitionFreeNet</a></div><div class="post-share"><div class="social-share" data-image="https://11.g2022cyk.top:8081/wp-content/uploads/2022/03/1648472807-展示-手机-scaled.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wx.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/wx.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/zfb.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/zfb.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2022/04/29/%E5%9B%9B%E5%AD%A3%E5%AD%A6%E6%AD%A3%E5%BC%8F%E5%BC%80%E6%BA%90%EF%BC%81/" title="四季学正式开源！"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://11.g2022cyk.top:8081/wp-content/uploads/2022/03/1648472807-展示-手机-scaled.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">四季学正式开源！</div></div><div class="info-2"><div class="info-item-1"> 四季学已正式发布并保持开源！ 1https://github.com/cykzht/season-zhixue 介绍 四季学——退学网，可以绕过某学网的限制，获取到自己真实的成绩。 正如它的名字一样，这是一个会变换四季的程序，每次启动的时候都会重新选择一个季节作为主题季节。     程序原理 网站整体的框架使用Python+Flask+HTML+layui开发，本项目的诞生离不开zhixuewang、layui、Flask等开源库，感谢这些开发者为开源社区做出的贡献。 Web服务 使用Python的Flask框架返回页面信息。 123456789form flask import *app = Flask(__name__, static_url_path=&#x27;&#x27;)@app.route(&#x27;/&#x27;, methods=[&#x27;GET&#x27;, &#x27;POST&#x27;])def index():    &quot;&quot;&quot;返回登录页面&quot;&quot;&quot;	return render_templat...</div></div></div></a><a class="pagination-related" href="/2020/04/24/%E6%89%8B%E6%9C%BA%E8%BF%90%E8%A1%8CPython/" title="家里没有电脑？教你用手机编写Python程序"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://11.g2022cyk.top:8081/wp-content/uploads/2020/04/12d7643a6033101c2a06e9072fe4cd5-1024x973.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">家里没有电脑？教你用手机编写Python程序</div></div><div class="info-2"><div class="info-item-1"> 本教程会教你如何把Python程序运行在你的Android以及iOS设备上  安卓篇 推荐软件:Pydroid 3 Pydroid 3是最易于使用且功能强大的Android版Python 3 IDE。  下载链接：点击这里下载 或者复制下方链接 1https://www.coolapk.com/apk/ru.iiec.pydroid3 安装好之后首次运行会安装Python环境，不用手动配置也不用配置变量。  安装好后就可以开始写代码了，需要注意的是，输入的过程必须使用英文输入法输入，推荐使用百度输入法，对代码的兼容性非常好，如果有打不出来的符号可以滑动蓝色的符号条挑选需要的符号，如果使用输入法的中文标点进行输入的话，代码同样无法运行。  写完代码后点击右下角黄色的运行按钮，它就会自动编译运行，在控制台里同样可以进行输入的操作。  iOS篇 iOS上推荐Pythonista 在App Store上就能获取下载  需要注意的是，Pythonista是收费软件，而且价格不菲，有能力的话支持一下正版，实在不行tb解决吧。  小编这里也是没有购买这个软件，小伙伴们可以自己尝试使用该应用。 </div></div></div></a></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/%E5%B1%9E%E5%AE%9E%E8%AF%9A%E5%BF%83.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">程小客</div><div class="author-info-description">述事称心社团下的程序部门和影像部门</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">112</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">34</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" href="mailto:zhuhaitian@shushichenxin.com"><i class="fas fa-envelope"></i><span>联系我</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/cykzht" target="_blank" title="Github"><i class="fab fa-github" style="color: #hdhfbb;"></i></a><a class="social-icon" href="mailto:zhuhaitian@shushichenxin.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #000000;"></i></a><a class="social-icon" href="https://space.bilibili.com/122529890" target="_blank" title="Bilibili"><i class="fab fa-bilibili" style="color: #00A1D6;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎大家去<a href="https://www.shushichenxin.com/" target="_blank">述事称心</a>逛逛！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">Program Principles</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Web-Services"><span class="toc-number">2.1.</span> <span class="toc-text">Web Services</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Season-Update"><span class="toc-number">2.2.</span> <span class="toc-text">Season Update</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#User-Login"><span class="toc-number">2.3.</span> <span class="toc-text">User Login</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Login-Implementation"><span class="toc-number">2.4.</span> <span class="toc-text">Login Implementation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Frontend"><span class="toc-number">2.4.1.</span> <span class="toc-text">Frontend</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Backend"><span class="toc-number">2.4.2.</span> <span class="toc-text">Backend</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exam-Retrieval"><span class="toc-number">2.5.</span> <span class="toc-text">Exam Retrieval</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Score-Retrieval"><span class="toc-number">2.6.</span> <span class="toc-text">Score Retrieval</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Table-Presentation"><span class="toc-number">2.7.</span> <span class="toc-text">Table Presentation</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Frontend-2"><span class="toc-number">2.7.1.</span> <span class="toc-text">Frontend</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Backend-2"><span class="toc-number">2.7.2.</span> <span class="toc-text">Backend</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Automatic-Login"><span class="toc-number">2.8.</span> <span class="toc-text">Automatic Login</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">Usage Instructions</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Required-Environment"><span class="toc-number">3.1.</span> <span class="toc-text">Required Environment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Enable-the-Program"><span class="toc-number">3.2.</span> <span class="toc-text">Enable the Program</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Deploy-the-Program"><span class="toc-number">3.3.</span> <span class="toc-text">Deploy the Program</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">Flask Tutorial</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/11/19/TensorFlow%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/" title="TensorFlow安装教程"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://11.g2022cyk.top:8081/wp-content/uploads/2025/08/1754229626-ten.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TensorFlow安装教程"/></a><div class="content"><a class="title" href="/2024/11/19/TensorFlow%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/" title="TensorFlow安装教程">TensorFlow安装教程</a><time datetime="2024-11-19T14:12:41.000Z" title="发表于 2024-11-19 22:12:41">2024-11-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/19/tensorflow_installation_guide/" title="TensorFlow Installation Tutorial"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://11.g2022cyk.top:8081/wp-content/uploads/2025/08/1754229626-ten.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TensorFlow Installation Tutorial"/></a><div class="content"><a class="title" href="/2024/11/19/tensorflow_installation_guide/" title="TensorFlow Installation Tutorial">TensorFlow Installation Tutorial</a><time datetime="2024-11-19T14:12:41.000Z" title="发表于 2024-11-19 22:12:41">2024-11-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/22/goodbye_school_dropout_website/" title="Farewell to TuitionDrop"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://11.g2022cyk.top:8081/wp-content/uploads/2025/08/1754144143-show.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Farewell to TuitionDrop"/></a><div class="content"><a class="title" href="/2023/12/22/goodbye_school_dropout_website/" title="Farewell to TuitionDrop">Farewell to TuitionDrop</a><time datetime="2023-12-22T10:20:00.000Z" title="发表于 2023-12-22 18:20:00">2023-12-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/22/smartlearn_net_easily_check_scores_on_phone/" title="Zhixue.com: Easily Check Scores on Your Mobile Device"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://11.g2022cyk.top:8081/wp-content/uploads/2025/08/1754144268-Screenshot_2023-12-20-16-56-51-556_com.pipipig.zhixue.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Zhixue.com: Easily Check Scores on Your Mobile Device"/></a><div class="content"><a class="title" href="/2023/12/22/smartlearn_net_easily_check_scores_on_phone/" title="Zhixue.com: Easily Check Scores on Your Mobile Device">Zhixue.com: Easily Check Scores on Your Mobile Device</a><time datetime="2023-12-22T10:20:00.000Z" title="发表于 2023-12-22 18:20:00">2023-12-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/22/%E5%86%8D%E8%A7%81%E9%80%80%E5%AD%A6%E7%BD%91/" title="再见退学网"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://11.g2022cyk.top:8081/wp-content/uploads/2025/08/1754144143-show.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="再见退学网"/></a><div class="content"><a class="title" href="/2023/12/22/%E5%86%8D%E8%A7%81%E9%80%80%E5%AD%A6%E7%BD%91/" title="再见退学网">再见退学网</a><time datetime="2023-12-22T10:20:00.000Z" title="发表于 2023-12-22 18:20:00">2023-12-22</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(https://11.g2022cyk.top:8081/wp-content/uploads/2022/03/1648472807-展示-手机-scaled.jpg);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2019 - 2025 By 程小客</span></div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/"><span>备案号：京ICP备2022028753号-1</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(async () => {
  const showKatex = () => {
    document.querySelectorAll('#article-container .katex').forEach(el => el.classList.add('katex-show'))
  }

  if (!window.katex_js_css) {
    window.katex_js_css = true
    await btf.getCSS('https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css')
    if (false) {
      await btf.getScript('https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js')
    }
  }

  showKatex()
})()</script><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getGiscusTheme = theme => theme === 'dark' ? 'dark' : 'light'

  const createScriptElement = config => {
    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => {
      ele.setAttribute(key, value)
    })
    return ele
  }

  const loadGiscus = (el = document, key) => {
    const mappingConfig = isShuoshuo
      ? { 'data-mapping': 'specific', 'data-term': key }
      : { 'data-mapping': (option && option['data-mapping']) || 'pathname' }

    const giscusConfig = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'cykzht/cykzht.github.io',
      'data-repo-id': 'MDEwOlJlcG9zaXRvcnkyMDI3MjY0OTg=',
      'data-category-id': 'DIC_kwDODBVcYs4Cts4-',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true,
      ...option,
      ...mappingConfig
    }

    const scriptElement = createScriptElement(giscusConfig)

    el.querySelector('#giscus-wrap').appendChild(scriptElement)

    if (isShuoshuo) {
      window.shuoshuoComment.destroyGiscus = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const changeGiscusTheme = theme => {
    const iframe = document.querySelector('#giscus-wrap iframe')
    if (iframe) {
      const message = {
        giscus: {
          setConfig: {
            theme: getGiscusTheme(theme)
          }
        }
      }
      iframe.contentWindow.postMessage(message, 'https://giscus.app')
    }
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if (isShuoshuo) {
    'Giscus' === 'Giscus'
      ? window.shuoshuoComment = { loadComment: loadGiscus }
      : window.loadOtherComment = loadGiscus
    return
  }

  if ('Giscus' === 'Giscus' || !false) {
    if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment = loadGiscus
  }
})()</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>